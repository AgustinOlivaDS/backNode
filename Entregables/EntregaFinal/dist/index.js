(()=>{"use strict";var r={343:function(r,o,t){var e=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(o,"__esModule",{value:!0});const s=e(t(860)),i=t(930);var d=s.default.Router();const n=new i;d.post("/",((r,o)=>{const t=r.body;o.json(n.save(t))})),d.delete("/:id",((r,o)=>{const t=parseInt(r.params.id);o.json(n.deleteById(t))})),d.get("/:id/productos",((r,o)=>{const t=parseInt(r.params.id);o.json(n.getById(t).productos)})),d.put("/:id",((r,o)=>{const t=parseInt(r.params.id),e=r.body;o.json(n.update(t,e))})),d.get("/:id/productos/:id_prod",((r,o)=>{const t=parseInt(r.params.id),e=parseInt(r.params.id_prod);o.json(n.getProductoById(t,e))})),d.get("/:id",((r,o)=>{const t=parseInt(r.params.id);o.json(n.getById(t))})),r.exports=d},559:function(r,o,t){var e=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(o,"__esModule",{value:!0});const s=e(t(860)),i=t(845),d=t(930);var n=s.default.Router();const c=new i;new d,n.get("/",((r,o)=>{r.administrador?o.json(c.getAll()):(o.status(404),o.json({error:-1,descripcion:`Ruta ${r.baseUrl} método ${r.method} no autorizada`}))})),n.get("/:id",((r,o)=>{const t=parseInt(r.params.id);o.json(c.getById(t))})),n.post("/",((r,o)=>{if(r.administrador){const t=r.body;o.json(c.save(t))}else o.status(404),o.json({error:-1,descripcion:`Ruta ${r.baseUrl} método ${r.method} no autorizada`})})),n.put("/:id",((r,o)=>{if(r.administrador){const t=parseInt(r.params.id),e=r.body;o.json(c.update(t,e))}else o.status(404),o.json({error:-1,descripcion:`Ruta ${r.baseUrl} método ${r.method} no autorizada`})})),n.delete("/:id",((r,o)=>{if(r.administrador){const t=parseInt(r.params.id);o.json(c.deleteById(t))}else o.status(404),o.json({error:-1,descripcion:`Ruta ${r.baseUrl} método ${r.method} no autorizada`})})),r.exports=n},392:(r,o,t)=>{t(723),r.exports=class{constructor(){this.id=0,this.productos=[],this.id=0,this.timestamp=new Date,this.productos=[]}}},930:(r,o,t)=>{var e;t(392),r.exports=((e=class r{constructor(){r.carritos=[]}save(o){return r.carritos.length>0?o.id=r.carritos[r.carritos.length-1].id+1:o.id=1,o.timestamp=Date.now(),o.productos.forEach((r=>{r.timestamp=Date.now()})),r.carritos.push(o),{error:"ok",id:o.id}}update(o,t){let e=r.carritos.findIndex((r=>r.id===o));if(console.log(e),-1===e)return{error:"Carrito no encontrado"};try{return r.carritos[e].productos=t.productos,{error:"ok",carritos:r.carritos[e]}}catch(r){return{error:r}}}getById(o){let t=r.carritos.find((r=>r.id===o));return void 0===t?{error:"Carrito no encontrado",carritos:t}:{error:"ok",carritos:t}}getProductoById(o,t){let e=r.carritos.findIndex((r=>r.id===o));if(void 0!==e){let o=r.carritos[e].productos.findIndex((r=>r.id===t));return void 0!==o?(r.carritos[e].productos.splice(o,1),{error:"ok",producto:o}):{error:`No existe producto con id: ${t}`}}return{error:`No existe carrito con id: ${o}`}}getAll(){return console.log(r.carritos),r.carritos.length>0?{error:"ok",carritos:r.carritos}:{error:"No existen carritos",carritos:r.carritos}}deleteById(o){let t=r.carritos.findIndex((r=>r.id===o));return void 0!==t?(r.carritos.splice(t,1),{error:"Carrito Eliminado"}):{error:`No existe carrito con id: ${o}`}}deleteProductoById(o,t){let e=r.carritos.findIndex((r=>r.id===o));if(void 0!==e){let o=r.carritos[e].productos.findIndex((r=>r.id===t));return void 0!==o?(r.carritos[e].productos.splice(o,1),{error:"Producto Eliminado"}):{error:`No existe producto con id: ${t}`}}return{error:`No existe carrito con id: ${o}`}}deleteAll(){r.carritos=[]}}).carritos=[],e)},723:r=>{r.exports=class{constructor(){this.id=0,this.timestamp=new Date,this.nombre="",this.descripcion="",this.codigo=0,this.foto="",this.precio=0,this.stock=0}}},366:r=>{r.exports=class{constructor(){this.id=0,this.title="",this.price=0,this.thumbnail=""}}},845:(r,o,t)=>{var e;t(366),r.exports=((e=class r{constructor(){r.products=[{id:1,title:"regla"}]}save(o){return r.products.length>0?o.id=r.products[r.products.length-1].id+1:o.id=1,o.timestamp=Date.now(),r.products.push(o),{error:"ok",id:o.id}}update(o,t){let e=r.products.findIndex((r=>r.id===o));if(console.log(e),-1===e)return{error:"Producto no encontrado"};try{return r.products[e].title=t.title,r.products[e].price=t.price,r.products[e].thumbnail=t.thumbnail,{error:"ok",productos:r.products[e]}}catch(r){return{error:r}}}getById(o){let t=r.products.find((r=>r.id===o));return void 0===t?{error:"Producto no encontrado",productos:t}:{error:"ok",productos:t}}getAll(){return console.log(r.products),r.products.length>0?{error:"ok",productos:r.products}:{error:"No existen productos",productos:r.products}}deleteById(o){let t=r.products.findIndex((r=>r.id===o));return void 0!==t?(r.products.splice(t,1),{error:"Producto Eliminado"}):{error:`No existe producto con id: ${o}`}}deleteAll(){r.products=[]}}).products=[],e)},860:r=>{r.exports=require("express")}},o={};function t(e){var s=o[e];if(void 0!==s)return s.exports;var i=o[e]={exports:{}};return r[e].call(i.exports,i,i.exports,t),i.exports}(()=>{const r=t(860),o=r(),e=t(559),s=t(343);o.use(r.json()),o.use(r.urlencoded({extended:!0})),o.use((function(r,o,t){r.administrador=!1,console.log(`administrador ${r.administrador}`),t()})),o.use("/api/productos",e),o.use("/api/carrito",s),o.use((function(r,o,t){o.status(404),o.json({error:-2,descripcion:`Error 404. Ruta ${r.baseUrl} método ${r.method} no implementado`})})),o.use("/",r.static(__dirname+"/public"));const i=o.listen(8080,(()=>{console.log(`Server linstening on port ${i.address().port}`)}))})()})();